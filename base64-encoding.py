# https://www.codewars.com/kata/base64-encoding/train/python
# for some reason codewars failing it with a global but with dicts inside functions every thing is ok.
# python 2.7 again 

import re

alpha = {'0' : '00110000', '1' : '00110001', '2' : '00110010',
'3' : '00110011', '4' : '00110100', '5' : '00110101',
'6' : '00110110', '7' : '00110111', '8' : '00111000',
'9' : '00111001', ' ' : '00100000', '!' : '00100001',
'.' : '00101110', '+' : '00101011', '/' : '00101111',
'A' : '01000001', 'B' : '01000010', 'C' : '01000011',
'D' : '01000100', 'E' : '01000101', 'F' : '01000110',
'G' : '01000111', 'H' : '01001000', 'I' : '01001001',
'J' : '01001010', 'K' : '01001011', 'L' : '01001100',
'M' : '01001101', 'N' : '01001110', 'O' : '01001111',
'P' : '01010000', 'Q' : '01010001', 'R' : '01010010',
'S' : '01010011', 'T' : '01010100', 'U' : '01010101',
'V' : '01010110', 'W' : '01010111', 'X' : '01011000',
'Y' : '01011001', 'Z' : '01011010',
'a' : '01100001', 'b' : '01100010', 'c' : '01100011',
'd' : '01100100', 'e' : '01100101', 'f' : '01100110',
'g' : '01100111', 'h' : '01101000', 'i' : '01101001',
'j' : '01101010', 'k' : '01101011', 'l' : '01101100',
'm' : '01101101', 'n' : '01101110', 'o' : '01101111',
'p' : '01110000', 'q' : '01110001', 'r' : '01110010',
's' : '01110011', 't' : '01110100', 'u' : '01110101',
'v' : '01110110', 'w' : '01110111', 'x' : '01111000',
'y' : '01111001', 'z' : '01111010'}

six4 = {'0' : '110100', '1' : '110101', '2' : '110110',
'3' : '110111', '4' : '111000', '5' : '111001' ,
'6' : '111010', '7' : '111011', '8' : '111100',
'9' : '111101', 
'A' : '000000', 'B' : '000001', 'C' : '000010',
'D' : '000011', 'E' : '000100', 'F' : '000101',
'G' : '000110', 'H' : '000111', 'I' : '001000',
'J' : '001001', 'K' : '001010', 'L' : '001011',
'M' : '001100', 'N' : '001101', 'O' : '001110',
'P' : '001111', 'Q' : '010000', 'R' : '010001',
'S' : '010010', 'T' : '010011', 'U' : '010100',
'V' : '010101', 'W' : '010110', 'X' : '010111',
'Y' : '011000', 'Z' : '011001',
'a' : '011010', 'b' : '011011', 'c' : '011100',
'd' : '011101', 'e' : '011110', 'f' : '011111',
'g' : '100000', 'h' : '100001', 'i' : '100010',
'j' : '100011', 'k' : '100100', 'l' : '100101',
'm' : '100110', 'n' : '100111', 'o' : '101000',
'p' : '101001', 'q' : '101010', 'r' : '101011',
's' : '101100', 't' : '101101', 'u' : '101110',
'v' : '101111', 'w' : '110000', 'x' : '110001',
'y' : '110010', 'z' : '110011'}

def to_base_64(string):
    global alpha
    global six4
    six4 = dict((value, key) for key, value in six4.iteritems())
    string = re.sub(r'(.)', lambda mo: alpha.get(mo.group()), string)
    while bool(len(string)%6) == True:
        string+= '0'
    return re.sub(r'(\d{6})', lambda mo: six4.get(mo.group()), string)

def from_base_64(string):
    global alpha
    global six4
    alpha = dict((value, key) for key, value in alpha.iteritems())
    string = re.sub(r'(.)', lambda mo: six4.get(mo.group()), string)
    while bool(len(string)%8) == True:
        string+= '0'
    return re.sub(r'(\d{8})', lambda mo: alpha.get(mo.group()), string)

#tests
#print(to_base_64("EE+s3q83XeC"))
#print(from_base_64("Rw"))    
